version: "3.1"

rules:

# ğŸš€ Rule to start form after user says greeting like "hello"
- rule: ğŸš€ Start form with time-based greeting
  steps:
    - intent: greet
    - action: action_time_based_greet
    - action: user_data_form
    - active_loop: user_data_form

# ğŸŸ¢ Rule to start form when user types/sends "start" (used by JS on open)
- rule: ğŸŸ¢ Start form from "start"
  steps:
    - intent: start_form
    - action: action_time_based_greet
    - action: user_data_form
    - active_loop: user_data_form

# âœ… Submit form after all required slots are filled
- rule: âœ… Submit form
  condition:
    - active_loop: user_data_form
  steps:
    - action: user_data_form
    - active_loop: null
    - action: action_submit_user_data
    - action: utter_done

# ğŸŒ Rule to process language selection buttons
- rule: ğŸŒ Set user language
  steps:
    - intent: set_language
    - action: action_validate_input_language

# âš ï¸ Fallback rule for unrecognized input
- rule: âš ï¸ Handle fallback
  steps:
    - intent: nlu_fallback
    - action: utter_default
